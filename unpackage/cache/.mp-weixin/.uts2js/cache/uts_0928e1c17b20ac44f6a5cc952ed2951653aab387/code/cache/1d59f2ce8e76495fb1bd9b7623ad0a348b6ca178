{"code":"import { defineComponent as _defineComponent } from 'vue';\nimport { o as _o, gei as _gei, sei as _sei, e as _e } from \"vue\";\nimport { ref, computed } from 'vue';\nexport default /*#__PURE__*/ _defineComponent({\n    __name: 'verify',\n    setup(__props) {\n        const formData = ref(new UTSJSONObject({\n            realName: '',\n            idCard: '',\n            idCardFront: '',\n            idCardBack: ''\n        }));\n        const agreed = ref(false);\n        // 是否可以提交\n        const canSubmit = computed(() => {\n            return formData.value.realName &&\n                formData.value.idCard &&\n                formData.value.idCardFront &&\n                formData.value.idCardBack &&\n                agreed.value;\n        });\n        // 返回\n        function goBack() {\n            uni.navigateBack();\n        }\n        // 选择图片\n        function chooseImage(type) {\n            uni.chooseImage(new UTSJSONObject({\n                count: 1,\n                sizeType: ['compressed'],\n                sourceType: ['album', 'camera'],\n                success: (res) => {\n                    const tempFilePaths = res.tempFilePaths;\n                    if (tempFilePaths.length > 0) {\n                        if (type === 'front') {\n                            formData.value.idCardFront = tempFilePaths[0];\n                        }\n                        else {\n                            formData.value.idCardBack = tempFilePaths[0];\n                        }\n                    }\n                },\n                fail: (err) => {\n                    uni.__f__('error', 'at pages/profile/verify.uvue:190', '选择图片失败:', err);\n                    uni.showToast({\n                        title: '选择图片失败',\n                        icon: 'none'\n                    });\n                }\n            }));\n        }\n        // 查看示例图片\n        function showExample() {\n            uni.showModal(new UTSJSONObject({\n                title: '示例说明',\n                content: '请确保身份证照片清晰完整，四角可见，光线充足，无反光遮挡。',\n                showCancel: false\n            }));\n        }\n        // 同意协议改变\n        function onAgreementChange(e = null) {\n            agreed.value = e.detail.value.length > 0;\n        }\n        // 查看协议\n        function viewAgreement(type) {\n            const title = type === 'verify' ? '实名认证协议' : '隐私政策';\n            uni.showModal(new UTSJSONObject({\n                title: title,\n                content: '协议内容页面开发中...',\n                showCancel: false\n            }));\n        }\n        // 验证身份证号\n        function validateIdCard(idCard) {\n            const reg = /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/;\n            return reg.test(idCard);\n        }\n        // 提交认证\n        function handleSubmit() {\n            if (!canSubmit.value) {\n                uni.showToast({\n                    title: '请完善所有信息',\n                    icon: 'none'\n                });\n                return null;\n            }\n            // 验证身份证号格式\n            if (!validateIdCard(formData.value.idCard)) {\n                uni.showToast({\n                    title: '身份证号格式不正确',\n                    icon: 'none'\n                });\n                return null;\n            }\n            // 显示确认对话框\n            uni.showModal(new UTSJSONObject({\n                title: '确认提交',\n                content: '请确认您提供的信息真实有效，提交后将进入审核流程。',\n                success: (res) => {\n                    if (res.confirm) {\n                        submitVerification();\n                    }\n                }\n            }));\n        }\n        // 提交实名认证\n        function submitVerification() {\n            uni.showLoading({\n                title: '提交中...'\n            });\n            // TODO: 实际应上传图片并调用后端API\n            // 1. 上传身份证正面照片\n            // 2. 上传身份证反面照片\n            // 3. 提交认证信息\n            // 模拟提交\n            setTimeout(() => {\n                uni.hideLoading();\n                // TODO: 调用后端API\n                // POST /api/user/verify\n                // {\n                //   real_name: formData.value.realName,\n                //   id_card: formData.value.idCard,\n                //   id_card_front_url: '上传后的图片URL',\n                //   id_card_back_url: '上传后的图片URL'\n                // }\n                uni.showModal(new UTSJSONObject({\n                    title: '提交成功',\n                    content: '您的实名认证申请已提交，我们将在1-3个工作日内完成审核，请耐心等待。',\n                    showCancel: false,\n                    success: () => {\n                        // 更新本地用户信息的认证状态\n                        const userInfo = uni.getStorageSync('userInfo');\n                        if (userInfo) {\n                            userInfo.is_verified = true;\n                            userInfo.verify_status = 'pending'; // pending: 审核中, approved: 已通过, rejected: 已拒绝\n                            uni.setStorageSync('userInfo', userInfo);\n                        }\n                        // 返回上一页\n                        uni.navigateBack();\n                    }\n                }));\n            }, 2000);\n        }\n        return (_ctx, _cache) => {\n            \"raw js\";\n            const __returned__ = _e({\n                a: _o(goBack),\n                b: formData.value.realName,\n                c: _o($event => { return formData.value.realName = $event.detail.value; }),\n                d: formData.value.idCard,\n                e: _o($event => { return formData.value.idCard = $event.detail.value; }),\n                f: formData.value.idCardFront\n            }, formData.value.idCardFront ? {\n                g: formData.value.idCardFront\n            } : {}, {\n                h: _o($event => { return chooseImage('front'); }),\n                i: formData.value.idCardBack\n            }, formData.value.idCardBack ? {\n                j: formData.value.idCardBack\n            } : {}, {\n                k: _o($event => { return chooseImage('back'); }),\n                l: _o(showExample),\n                m: agreed.value,\n                n: _o($event => { return viewAgreement('verify'); }),\n                o: _o($event => { return viewAgreement('privacy'); }),\n                p: _o(onAgreementChange),\n                q: !canSubmit.value ? 1 : '',\n                r: _o(handleSubmit),\n                s: _sei(_gei(_ctx, ''), 'view')\n            });\n            return __returned__;\n        };\n    }\n});\n//# sourceMappingURL=/Users/daren1/Desktop/epg3/pages/profile/verify.uvue?vue&type=script&setup=true&lang.uts.js.map","references":["/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts"],"uniExtApis":["uni.navigateBack","uni.__f__","uni.showToast","uni.chooseImage","uni.showModal","uni.showLoading","uni.hideLoading","uni.getStorageSync","uni.setStorageSync"],"map":"{\"version\":3,\"file\":\"verify.uvue?vue&type=script&setup=true&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"verify.uvue?vue&type=script&setup=true&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
