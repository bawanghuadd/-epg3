<template>
  <view class="page">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <view class="top-nav">
      <text class="nav-title">æˆ‘çš„è®¢å•</text>
    </view>

    <scroll-view scroll-y class="content-scroll">
      <!-- Tabåˆ‡æ¢ - è®¢å•çŠ¶æ€ -->
      <scroll-view scroll-x class="tabs-scroll">
        <view class="tabs">
          <view 
            class="tab-item" 
            :class="{ active: activeTab === index }"
            v-for="(tab, index) in tabs" 
            :key="index"
            @click="switchTab(index)"
          >
            <text class="tab-text">{{ tab.name }}</text>
            <view class="tab-badge" v-if="tab.count > 0">
              <text>{{ tab.count > 99 ? '99+' : tab.count }}</text>
            </view>
          </view>
        </view>
      </scroll-view>

      <!-- è®¢å•åˆ—è¡¨ -->
      <view class="order-list">
        <!-- ç©ºçŠ¶æ€ -->
        <view class="empty-state" v-if="filteredOrders.length === 0">
          <text class="empty-icon">ğŸ“‹</text>
          <text class="empty-text">æš‚æ— è®¢å•</text>
          <button class="empty-btn" @click="goToCreate">ç«‹å³ä¸‹å•</button>
        </view>

        <!-- è®¢å•å¡ç‰‡ -->
        <view class="order-card" v-for="(order, index) in filteredOrders" :key="index">
          <!-- è®¢å•å¤´éƒ¨ -->
          <view class="order-header">
            <view class="order-info">
              <text class="order-id">è®¢å•å·ï¼š{{ order.orderNo }}</text>
              <text class="order-time">{{ order.createTime }}</text>
            </view>
            <text class="order-status" :class="'status-' + order.status">{{ order.statusText }}</text>
          </view>

          <!-- è®¢å•å†…å®¹ -->
          <view class="order-content" @click="goToDetail(order)">
            <view class="service-info">
              <text class="service-type">{{ order.serviceType }}</text>
              <text class="service-title">{{ order.title }}</text>
              <text class="service-desc">{{ order.description }}</text>
            </view>
            <view class="order-detail">
              <text class="detail-item">ğŸ“ {{ order.address }}</text>
              <text class="detail-item" v-if="order.engineerName">ğŸ‘· {{ order.engineerName }}</text>
              <text class="detail-item">ğŸ’° ï¿¥{{ order.price }}</text>
            </view>
          </view>

          <!-- è®¢å•æ“ä½œæŒ‰é’® -->
          <view class="order-actions">
            <!-- å¾…ä»˜æ¬¾ -->
            <template v-if="order.status === 1">
              <button class="action-btn secondary" @click.stop="cancelOrder(order)">å–æ¶ˆè®¢å•</button>
              <button class="action-btn primary" @click.stop="payOrder(order)">ç«‹å³æ”¯ä»˜</button>
            </template>

            <!-- å¾…æ¥å• -->
            <template v-if="order.status === 2">
              <button class="action-btn secondary" @click.stop="cancelOrder(order)">å–æ¶ˆè®¢å•</button>
              <button class="action-btn" @click.stop="goToDetail(order)">æŸ¥çœ‹è¯¦æƒ…</button>
            </template>

            <!-- å·²æ¥å•ï¼ˆå¾…ç­¾çº¦ï¼‰ -->
            <template v-if="order.status === 3">
              <button class="action-btn secondary" @click.stop="contactEngineer(order)">è”ç³»å·¥ç¨‹å¸ˆ</button>
              <button class="action-btn primary" @click.stop="signContract(order)">ç­¾çº¦</button>
            </template>

            <!-- å·²ç­¾çº¦ï¼ˆå¾…æœåŠ¡ï¼‰ -->
            <template v-if="order.status === 4">
              <button class="action-btn secondary" @click.stop="contactPlatform(order)">è”ç³»å¹³å°å–æ¶ˆ</button>
              <button class="action-btn" @click.stop="contactEngineer(order)">è”ç³»å·¥ç¨‹å¸ˆ</button>
            </template>

            <!-- æœåŠ¡ä¸­ -->
            <template v-if="order.status === 5">
              <button class="action-btn secondary" @click.stop="reportOrder(order)">æŠ•è¯‰/ä¸¾æŠ¥</button>
              <button class="action-btn" @click.stop="contactEngineer(order)">è”ç³»å·¥ç¨‹å¸ˆ</button>
            </template>

            <!-- å¾…ç¡®è®¤ -->
            <template v-if="order.status === 6">
              <button class="action-btn secondary" @click.stop="applyAfterSale(order)">ç”³è¯·å”®å</button>
              <button class="action-btn primary" @click.stop="confirmComplete(order)">ç¡®è®¤å®Œæˆ</button>
            </template>

            <!-- å·²å®Œæˆ -->
            <template v-if="order.status === 7">
              <button class="action-btn secondary" @click.stop="applyAfterSale(order)">ç”³è¯·å”®å</button>
              <button class="action-btn" @click.stop="goToDetail(order)">æŸ¥çœ‹è¯¦æƒ…</button>
            </template>

            <!-- å”®åä¸­ -->
            <template v-if="order.status === 8">
              <button class="action-btn" @click.stop="goToDetail(order)">æŸ¥çœ‹å”®åè¿›åº¦</button>
            </template>

            <!-- å·²å–æ¶ˆ -->
            <template v-if="order.status === 9">
              <button class="action-btn" @click.stop="deleteOrder(order)">åˆ é™¤è®¢å•</button>
              <button class="action-btn primary" @click.stop="reOrder(order)">å†æ¥ä¸€å•</button>
            </template>
          </view>
        </view>
      </view>

      <!-- å ä½ -->
      <view style="height: 180rpx;"></view>
    </scroll-view>

    <!-- åº•éƒ¨å¯¼èˆªæ  -->
    <view class="bottom-nav">
      <view class="nav-item" @click="navigateTo('home')">
        <image class="nav-icon" src="/static/icons/home.png" mode="aspectFit"></image>
        <text class="nav-label">é¦–é¡µ</text>
      </view>
      <view class="nav-item active" @click="navigateTo('order')">
        <image class="nav-icon" src="/static/icons/order-active.png" mode="aspectFit"></image>
        <text class="nav-label">è®¢å•</text>
      </view>
      <view class="fab-button" @click="handleFabClick">
        <text class="fab-icon">+</text>
      </view>
      <view class="nav-item" @click="navigateTo('message')">
        <image class="nav-icon" src="/static/icons/message.png" mode="aspectFit"></image>
        <text class="nav-label">æ¶ˆæ¯</text>
      </view>
      <view class="nav-item" @click="navigateTo('profile')">
        <image class="nav-icon" src="/static/icons/profile.png" mode="aspectFit"></image>
        <text class="nav-label">æˆ‘çš„</text>
      </view>
    </view>
  </view>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue'

const activeTab = ref(0)

// è®¢å•çŠ¶æ€Tabï¼ˆ10ä¸ªçŠ¶æ€ï¼‰
const tabs = ref([
  { name: 'å…¨éƒ¨', status: 0, count: 0 },
  { name: 'å¾…ä»˜æ¬¾', status: 1, count: 0 },
  { name: 'å¾…æ¥å•', status: 2, count: 0 },
  { name: 'å¾…ç­¾çº¦', status: 3, count: 0 },
  { name: 'å¾…æœåŠ¡', status: 4, count: 0 },
  { name: 'æœåŠ¡ä¸­', status: 5, count: 0 },
  { name: 'å¾…ç¡®è®¤', status: 6, count: 0 },
  { name: 'å·²å®Œæˆ', status: 7, count: 0 },
  { name: 'å”®åä¸­', status: 8, count: 0 },
  { name: 'å·²å–æ¶ˆ', status: 9, count: 0 }
])

// è®¢å•åˆ—è¡¨ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
const orders = ref([
  {
    id: 1,
    orderNo: 'ORD202501190001',
    status: 1,
    statusText: 'å¾…ä»˜æ¬¾',
    serviceType: 'å”®åæœåŠ¡',
    title: 'æ™ºæ…§å›­åŒºå¼±ç”µç³»ç»Ÿç»´ä¿®',
    description: 'ç½‘ç»œè®¾å¤‡æ•…éšœï¼Œéœ€è¦ç´§æ€¥ç»´ä¿®',
    address: 'æ‰¬å·å¸‚æ±Ÿéƒ½åŒºæ™ºæ…§äº§ä¸šå›­3å·æ¥¼',
    engineerName: '',
    price: '500.00',
    createTime: '2025-01-19 10:30'
  },
  {
    id: 2,
    orderNo: 'ORD202501190002',
    status: 3,
    statusText: 'å·²æ¥å•ï¼ˆå¾…ç­¾çº¦ï¼‰',
    serviceType: 'å”®å‰æœåŠ¡',
    title: 'å……ç”µæ¡©å®‰è£…æ–¹æ¡ˆå’¨è¯¢',
    description: 'éœ€è¦ä¸“ä¸šå·¥ç¨‹å¸ˆè¯„ä¼°ç°åœº',
    address: 'æ‰¬å·å¸‚å¹¿é™µåŒºå•†ä¸šå¹¿åœºåœè½¦åœº',
    engineerName: 'æå·¥',
    price: '1200.00',
    createTime: '2025-01-18 15:20'
  },
  {
    id: 3,
    orderNo: 'ORD202501180003',
    status: 5,
    statusText: 'æœåŠ¡ä¸­',
    serviceType: 'å›¢é˜ŸæœåŠ¡',
    title: 'æ™ºæ…§ä½“è‚²åœºé¦†ç»¼åˆå¸ƒçº¿',
    description: 'å¤§å‹é¡¹ç›®ï¼Œéœ€è¦å›¢é˜Ÿåä½œ',
    address: 'æ‰¬å·å¸‚é‚—æ±ŸåŒºä½“è‚²ä¸­å¿ƒ',
    engineerName: 'å¼ å·¥å›¢é˜Ÿ',
    price: '8500.00',
    createTime: '2025-01-17 09:00'
  }
])

// æ ¹æ®å½“å‰Tabç­›é€‰è®¢å•
const filteredOrders = computed(() => {
  if (activeTab.value === 0) {
    return orders.value // å…¨éƒ¨
  }
  const targetStatus = tabs.value[activeTab.value].status
  return orders.value.filter(order => order.status === targetStatus)
})

onMounted(() => {
  // è·å–é¡µé¢å‚æ•°
  const pages = getCurrentPages()
  const currentPage = pages[pages.length - 1] as any
  const options = currentPage.options || {}
  
  // æ ¹æ®å‚æ•°åˆ‡æ¢åˆ°å¯¹åº”çš„tab
  if (options.status) {
    const statusMap: any = {
      'pending': 2,      // å¾…æ¥å•
      'inService': 5,    // æœåŠ¡ä¸­
      'toCheck': 6,      // å¾…ç¡®è®¤
      'toRate': 7        // å¾…è¯„ä»·(å·²å®Œæˆ)
    }
    const tabIndex = statusMap[options.status] || 0
    if (tabIndex > 0 && tabIndex < tabs.value.length) {
      activeTab.value = tabIndex
    }
  }
  
  loadOrders()
  updateTabCounts()
})

function switchTab(index: number) {
  activeTab.value = index
}

// åŠ è½½è®¢å•æ•°æ®
function loadOrders() {
  // TODO: å®é™…åº”ä»åç«¯APIè·å–
  // GET /api/orders?status={status}
  console.log('åŠ è½½è®¢å•åˆ—è¡¨')
}

// æ›´æ–°Tabè§’æ ‡æ•°é‡
function updateTabCounts() {
  tabs.value.forEach(tab => {
    if (tab.status === 0) {
      tab.count = orders.value.length
    } else {
      tab.count = orders.value.filter(o => o.status === tab.status).length
    }
  })
}

// ========== è®¢å•æ“ä½œ ==========

// æŸ¥çœ‹è®¢å•è¯¦æƒ…
function goToDetail(order: any) {
  uni.navigateTo({
    url: `/pages/order/detail?id=${order.id}`
  })
}

// ç«‹å³æ”¯ä»˜
function payOrder(order: any) {
  uni.showModal({
    title: 'ç¡®è®¤æ”¯ä»˜',
    content: `è®¢å•é‡‘é¢ï¼šï¿¥${order.price}`,
    confirmText: 'ç¡®è®¤æ”¯ä»˜',
    success: (res) => {
      if (res.confirm) {
        // TODO: è°ƒç”¨æ”¯ä»˜æ¥å£
        uni.showToast({
          title: 'æ”¯ä»˜åŠŸèƒ½å¼€å‘ä¸­',
          icon: 'none'
        })
      }
    }
  })
}

// å–æ¶ˆè®¢å•
function cancelOrder(order: any) {
  uni.showModal({
    title: 'å–æ¶ˆè®¢å•',
    content: 'ç¡®å®šè¦å–æ¶ˆè¿™ä¸ªè®¢å•å—ï¼Ÿ',
    confirmText: 'ç¡®å®š',
    success: (res) => {
      if (res.confirm) {
        // TODO: è°ƒç”¨å–æ¶ˆè®¢å•æ¥å£
        uni.showToast({
          title: 'è®¢å•å·²å–æ¶ˆ',
          icon: 'success'
        })
        // åˆ·æ–°åˆ—è¡¨
        loadOrders()
      }
    }
  })
}

// ç­¾çº¦
function signContract(order: any) {
  uni.showModal({
    title: 'ç­¾è®¢åˆåŒ',
    content: 'è¯·ç¡®è®¤ä¸å·¥ç¨‹å¸ˆç­¾è®¢æœåŠ¡åˆåŒ',
    confirmText: 'ç¡®è®¤ç­¾çº¦',
    success: (res) => {
      if (res.confirm) {
        // TODO: è·³è½¬åˆ°ç”µå­ç­¾çº¦é¡µé¢
        uni.showToast({
          title: 'ç­¾çº¦åŠŸèƒ½å¼€å‘ä¸­',
          icon: 'none'
        })
      }
    }
  })
}

// è”ç³»å·¥ç¨‹å¸ˆï¼ˆç¾¤èŠï¼‰
function contactEngineer(order: any) {
  uni.showToast({
    title: 'æ­£åœ¨è¿›å…¥ç¾¤èŠ...',
    icon: 'loading'
  })
  
  setTimeout(() => {
    // TODO: è·³è½¬åˆ°IMç¾¤èŠé¡µé¢
    uni.showToast({
      title: 'IMåŠŸèƒ½å¼€å‘ä¸­',
      icon: 'none'
    })
  }, 1000)
}

// è”ç³»å¹³å°å–æ¶ˆï¼ˆå·²ç­¾çº¦åï¼‰
function contactPlatform(order: any) {
  uni.showModal({
    title: 'è”ç³»å¹³å°',
    content: 'è®¢å•å·²ç­¾çº¦ï¼Œéœ€è¦è”ç³»å¹³å°å®¢æœååŠ©å–æ¶ˆ',
    confirmText: 'è”ç³»å®¢æœ',
    success: (res) => {
      if (res.confirm) {
        // TODO: è·³è½¬åˆ°å®¢æœé¡µé¢
        uni.showToast({
          title: 'å®¢æœåŠŸèƒ½å¼€å‘ä¸­',
          icon: 'none'
        })
      }
    }
  })
}

// æŠ•è¯‰/ä¸¾æŠ¥
function reportOrder(order: any) {
  uni.showActionSheet({
    itemList: ['æŠ•è¯‰å·¥ç¨‹å¸ˆ', 'ä¸¾æŠ¥è®¢å•', 'å–æ¶ˆ'],
    success: (res) => {
      if (res.tapIndex === 0) {
        // æŠ•è¯‰å·¥ç¨‹å¸ˆ
        uni.showToast({
          title: 'æŠ•è¯‰åŠŸèƒ½å¼€å‘ä¸­',
          icon: 'none'
        })
      } else if (res.tapIndex === 1) {
        // ä¸¾æŠ¥è®¢å•
        uni.showToast({
          title: 'ä¸¾æŠ¥åŠŸèƒ½å¼€å‘ä¸­',
          icon: 'none'
        })
      }
    }
  })
}

// ç¡®è®¤å®Œæˆ
function confirmComplete(order: any) {
  uni.showModal({
    title: 'ç¡®è®¤å®Œæˆ',
    content: 'ç¡®è®¤å·¥ç¨‹å¸ˆå·²å®ŒæˆæœåŠ¡ï¼Ÿç¡®è®¤åå°†æ— æ³•æ’¤é”€',
    confirmText: 'ç¡®è®¤å®Œæˆ',
    success: (res) => {
      if (res.confirm) {
        // TODO: è°ƒç”¨ç¡®è®¤å®Œæˆæ¥å£
        uni.showToast({
          title: 'è®¢å•å·²å®Œæˆ',
          icon: 'success'
        })
        // åˆ·æ–°åˆ—è¡¨
        loadOrders()
      }
    }
  })
}

// ç”³è¯·å”®å
function applyAfterSale(order: any) {
  uni.showActionSheet({
    itemList: ['ç”³è¯·é€€æ¬¾', 'ç”³è¯·è¿”å·¥', 'è´¨é‡é—®é¢˜', 'å–æ¶ˆ'],
    success: (res) => {
      if (res.tapIndex < 3) {
        // TODO: è·³è½¬åˆ°å”®åç”³è¯·é¡µé¢
        uni.showToast({
          title: 'å”®ååŠŸèƒ½å¼€å‘ä¸­',
          icon: 'none'
        })
      }
    }
  })
}

// åˆ é™¤è®¢å•
function deleteOrder(order: any) {
  uni.showModal({
    title: 'åˆ é™¤è®¢å•',
    content: 'ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè®¢å•å—ï¼Ÿåˆ é™¤åæ— æ³•æ¢å¤',
    confirmText: 'åˆ é™¤',
    confirmColor: '#E53935',
    success: (res) => {
      if (res.confirm) {
        // TODO: è°ƒç”¨åˆ é™¤è®¢å•æ¥å£
        uni.showToast({
          title: 'è®¢å•å·²åˆ é™¤',
          icon: 'success'
        })
        // åˆ·æ–°åˆ—è¡¨
        loadOrders()
      }
    }
  })
}

// å†æ¥ä¸€å•
function reOrder(order: any) {
  uni.showModal({
    title: 'å†æ¥ä¸€å•',
    content: 'æ ¹æ®æ­¤è®¢å•ä¿¡æ¯åˆ›å»ºæ–°è®¢å•ï¼Ÿ',
    confirmText: 'ç¡®å®š',
    success: (res) => {
      if (res.confirm) {
        // TODO: è·³è½¬åˆ°å‘å¸ƒè®¢å•é¡µé¢ï¼Œå¸¦ä¸ŠåŸè®¢å•ä¿¡æ¯
        uni.navigateTo({
          url: `/pages/order/create?copyFrom=${order.id}`
        })
      }
    }
  })
}

// ç«‹å³ä¸‹å•
function goToCreate() {
  uni.navigateTo({
    url: '/pages/order/create'
  })
}

// æ‚¬æµ®æŒ‰é’®
function handleFabClick() {
  uni.navigateTo({
    url: '/pages/order/create'
  })
}

// åº•éƒ¨å¯¼èˆª
function navigateTo(page: string) {
  if (page === 'order') {
    return // å·²ç»åœ¨è®¢å•é¡µ
  }
  
  // åº•éƒ¨å¯¼èˆªä½¿ç”¨ reLaunch é¿å…å±‚çº§è¶…é™
  const pageMap: any = {
    'home': '/pages/home/home',
    'message': '/pages/message/message',
    'profile': '/pages/profile/profile'
  }
  
  if (pageMap[page]) {
    uni.reLaunch({
      url: pageMap[page]
    })
  }
}
</script>

<style scoped lang="scss">
.page {
  height: 100vh;
  background-color: #F5F5F5;
  display: flex;
  flex-direction: column;
}

.top-nav {
  background-color: #fff;
  padding: 32rpx 32rpx;
  padding-top: calc(64rpx + env(safe-area-inset-top));
  padding-bottom: 24rpx;
  text-align: center;
  border-bottom: 1rpx solid #f0f0f0;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  z-index: 1000;
}

.nav-title {
  font-size: 36rpx;
  font-weight: 700;
  color: #333;
}

.content-scroll {
  flex: 1;
  padding-top: calc(164rpx + env(safe-area-inset-top));
}

/* Tabæ¨ªå‘æ»šåŠ¨å®¹å™¨ */
.tabs-scroll {
  background-color: #fff;
  white-space: nowrap;
  border-bottom: 1rpx solid #f0f0f0;
}

.tabs {
  display: inline-flex;
  flex-direction: row;
  min-width: 100%;
}

.tab-item {
  flex-shrink: 0;
  padding: 24rpx 32rpx;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4rpx;
}

.tab-item.active {
  position: relative;
}

.tab-item.active::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 40rpx;
  height: 4rpx;
  background-color: #E53935;
  border-radius: 2rpx;
}

.tab-text {
  font-size: 28rpx;
  color: #666;
  white-space: nowrap;
}

.tab-item.active .tab-text {
  color: #E53935;
  font-weight: 600;
}

.tab-badge {
  position: absolute;
  top: 16rpx;
  right: 16rpx;
  min-width: 32rpx;
  height: 32rpx;
  background-color: #E53935;
  border-radius: 16rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 8rpx;
  font-size: 20rpx;
  color: #fff;
  font-weight: 600;
  line-height: 1;
}

.order-list {
  padding: 24rpx 32rpx;
}

.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 120rpx 0;
}

.empty-icon {
  font-size: 120rpx;
  margin-bottom: 24rpx;
  opacity: 0.3;
}

.empty-text {
  font-size: 28rpx;
  color: #999;
  margin-bottom: 40rpx;
}

.empty-btn {
  background-color: #E53935;
  color: #fff;
  border: none;
  padding: 20rpx 60rpx;
  border-radius: 40rpx;
  font-size: 28rpx;
}

/* è®¢å•å¡ç‰‡ */
.order-card {
  background-color: #fff;
  border-radius: 16rpx;
  padding: 32rpx;
  margin-bottom: 24rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.06);
}

.order-header {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 24rpx;
  padding-bottom: 20rpx;
  border-bottom: 1rpx solid #f0f0f0;
}

.order-info {
  display: flex;
  flex-direction: column;
  gap: 8rpx;
}

.order-id {
  font-size: 26rpx;
  color: #666;
}

.order-time {
  font-size: 24rpx;
  color: #999;
}

.order-status {
  font-size: 26rpx;
  font-weight: 600;
  padding: 6rpx 16rpx;
  border-radius: 12rpx;
  white-space: nowrap;
}

/* è®¢å•çŠ¶æ€é¢œè‰² */
.status-1 {
  color: #FF6B00;
  background-color: #FFF3E6;
}

.status-2 {
  color: #3B82F6;
  background-color: #EFF6FF;
}

.status-3 {
  color: #10B981;
  background-color: #ECFDF5;
}

.status-4 {
  color: #8B5CF6;
  background-color: #F5F3FF;
}

.status-5 {
  color: #F59E0B;
  background-color: #FFFBEB;
}

.status-6 {
  color: #06B6D4;
  background-color: #ECFEFF;
}

.status-7 {
  color: #10B981;
  background-color: #ECFDF5;
}

.status-8 {
  color: #EF4444;
  background-color: #FEF2F2;
}

.status-9 {
  color: #999;
  background-color: #F5F5F5;
}

/* è®¢å•å†…å®¹ */
.order-content {
  margin-bottom: 24rpx;
}

.service-info {
  margin-bottom: 16rpx;
}

.service-type {
  display: inline-block;
  font-size: 22rpx;
  color: #E53935;
  background-color: #FFEBEE;
  padding: 4rpx 12rpx;
  border-radius: 8rpx;
  margin-bottom: 12rpx;
}

.service-title {
  font-size: 32rpx;
  font-weight: 600;
  color: #333;
  margin-bottom: 8rpx;
  display: block;
  line-height: 1.4;
}

.service-desc {
  font-size: 26rpx;
  color: #666;
  line-height: 1.5;
  display: block;
}

.order-detail {
  display: flex;
  flex-direction: column;
  gap: 8rpx;
}

.detail-item {
  font-size: 26rpx;
  color: #666;
  line-height: 1.5;
}

/* è®¢å•æ“ä½œæŒ‰é’® */
.order-actions {
  display: flex;
  flex-direction: row;
  justify-content: flex-end;
  gap: 16rpx;
  padding-top: 24rpx;
  border-top: 1rpx solid #f0f0f0;
}

.action-btn {
  padding: 12rpx 28rpx;
  border-radius: 40rpx;
  font-size: 26rpx;
  font-weight: 500;
  border: 1rpx solid #E0E0E0;
  background-color: #fff;
  color: #666;
  line-height: 1;
}

.action-btn.secondary {
  border-color: #E0E0E0;
  background-color: #fff;
  color: #666;
}

.action-btn.primary {
  border-color: #E53935;
  background-color: #E53935;
  color: #fff;
}

.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: #fff;
  border-top: 1rpx solid #f0f0f0;
  display: flex;
  flex-direction: row;
  justify-content: space-around;
  align-items: flex-start;
  padding: 8rpx 0 0;
  padding-bottom: calc(56rpx + env(safe-area-inset-bottom));
  height: 56rpx;
  z-index: 999;
  box-shadow: 0 -2rpx 8rpx rgba(0, 0, 0, 0.06);
  overflow: visible;  /* å…è®¸åœ†å½¢æŒ‰é’®æº¢å‡ºåˆ°å¯¼èˆªæ å¤– */
}

.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4rpx;
  font-size: 22rpx;
  color: #666;
  flex: 1;
  margin-top: 0;
}

.nav-item.active {
  color: #E53935;
}

.nav-item.active .nav-label {
  color: #E53935;
}

.nav-icon {
  width: 44rpx;
  height: 44rpx;
}

.nav-item.active .nav-icon {
  opacity: 1;
}

.nav-item:not(.active) .nav-icon {
  opacity: 0.5;
}

.nav-label {
  font-size: 24rpx;
}

.fab-button {
  width: 112rpx;
  height: 112rpx;
  background: linear-gradient(135deg, #F44336 0%, #E53935 100%);
  border-radius: 50%;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  color: #fff;
  box-shadow: 0 8rpx 24rpx rgba(244, 67, 54, 0.4);
  margin-top: -56rpx;
  position: relative;
  z-index: 1000;
}

.fab-icon {
  font-size: 56rpx;
  color: #fff;
  font-weight: 700;
  line-height: 1;
  transform: translateY(-4rpx);
}
</style>

