<template>
  <view class="page">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <view class="top-nav">
      <text class="nav-back" @click="goBack">â†</text>
      <text class="nav-title">å‘å¸ƒéœ€æ±‚</text>
      <view class="nav-placeholder"></view>
    </view>

    <scroll-view scroll-y class="content-scroll">
      <!-- é€‰æ‹©æœåŠ¡ç±»å‹ -->
      <view class="section">
        <text class="section-title">é€‰æ‹©æœåŠ¡ç±»å‹</text>
        <view class="service-type-group">
          <view 
            class="service-type-card" 
            v-for="(item, index) in serviceTypes" 
            :key="index"
            :class="{ active: formData.serviceType === item.value }"
            @click="selectServiceType(item.value)"
          >
            <view class="check-mark" v-if="formData.serviceType === item.value">âœ“</view>
            <view class="card-header">
              <image class="service-icon" :src="item.icon" mode="aspectFit"></image>
            </view>
            <text class="service-name">{{ item.name }}</text>
            <text class="service-desc">{{ item.desc }}</text>
            <text class="service-detail">{{ item.detail }}</text>
          </view>
        </view>
      </view>

      <!-- è¯·é€‰æ‹©é—®é¢˜ç±»å‹ -->
      <view class="section">
        <text class="section-title">è¯·é€‰æ‹©é—®é¢˜ç±»å‹ <text class="optional">(å¯å¤šé€‰)</text></text>
        <view class="problem-type-group">
          <view 
            class="problem-type-item" 
            v-for="(item, index) in problemTypes" 
            :key="index"
            :class="{ active: item.selected }"
            @click="toggleProblemType(index)"
          >
            <view class="check-mark" v-if="item.selected">âœ“</view>
            <text class="problem-name">{{ item.name }}</text>
          </view>
        </view>
      </view>

      <!-- æ˜¯å¦å‘èµ·å·¥å• -->
      <view class="section">
        <text class="section-title">æ˜¯å¦å‘èµ·å·¥å•</text>
        <view class="option-group">
          <view 
            class="option-item" 
            :class="{ active: formData.initiateOrder === true }"
            @click="selectInitiateOrder(true)"
          >
            <view class="check-mark" v-if="formData.initiateOrder === true">âœ“</view>
            <text class="option-text">æ˜¯</text>
          </view>
          <view 
            class="option-item" 
            :class="{ active: formData.initiateOrder === false }"
            @click="selectInitiateOrder(false)"
          >
            <view class="check-mark" v-if="formData.initiateOrder === false">âœ“</view>
            <text class="option-text">å¦</text>
          </view>
        </view>
        <view class="tip">
          <view class="tip-dot"></view>
          <text class="tip-text">é€‰æ‹©"æ˜¯"è¡¨ç¤ºæ‚¨è‡ªå·±å‘èµ·å·¥å•ï¼Œé€‰æ‹©"å¦"è¡¨ç¤ºä»£ä»–äººå‘èµ·</text>
        </view>
      </view>

      <!-- å·¥å•åˆ†å‘æ¨¡å¼ -->
      <view class="section">
        <text class="section-title">å·¥å•åˆ†å‘æ¨¡å¼</text>
        <view class="option-group">
          <view 
            class="option-item" 
            :class="{ active: formData.distributionMode === 'auto' }"
            @click="selectDistributionMode('auto')"
          >
            <view class="check-mark" v-if="formData.distributionMode === 'auto'">âœ“</view>
            <text class="option-text">è‡ªåŠ¨åˆ†é…</text>
          </view>
          <view 
            class="option-item" 
            :class="{ active: formData.distributionMode === 'assign' }"
            @click="selectDistributionMode('assign')"
          >
            <view class="check-mark" v-if="formData.distributionMode === 'assign'">âœ“</view>
            <text class="option-text">æŒ‡å®šå·¥ç¨‹å¸ˆ</text>
          </view>
        </view>
        <view class="tip">
          <view class="tip-dot"></view>
          <text class="tip-text">è‡ªåŠ¨åˆ†é…:ç³»ç»Ÿæ ¹æ®è·ç¦»å’Œè¯„åˆ†æ¨èå·¥ç¨‹å¸ˆ;æŒ‡å®šå·¥ç¨‹å¸ˆ:æ‚¨å¯é€‰æ‹©æŒ‡å®šçš„æœåŠ¡äººå‘˜</text>
        </view>
      </view>

      <!-- æœåŠ¡æ–¹å¼ -->
      <view class="section">
        <text class="section-title">æœåŠ¡æ–¹å¼</text>
        <view class="option-group">
          <view 
            class="option-item" 
            :class="{ active: formData.serviceMethod === 'online' }"
            @click="selectServiceMethod('online')"
          >
            <view class="check-mark" v-if="formData.serviceMethod === 'online'">âœ“</view>
            <text class="option-text">çº¿ä¸ŠæœåŠ¡</text>
          </view>
          <view 
            class="option-item" 
            :class="{ active: formData.serviceMethod === 'onsite' }"
            @click="selectServiceMethod('onsite')"
          >
            <view class="check-mark" v-if="formData.serviceMethod === 'onsite'">âœ“</view>
            <text class="option-text">çº¿ä¸‹ä¸Šé—¨</text>
          </view>
        </view>
      </view>

      <!-- æœåŠ¡åœ°å€ -->
      <view class="section">
        <text class="section-title">æœåŠ¡åœ°å€</text>
        <view class="address-card" @click="chooseAddress">
          <view class="address-content">
            <text class="address-name">{{ formData.address.name || 'æ‰¬å·å¸‚æ™ºæ…§å›­åŒº' }}</text>
            <text class="address-detail">{{ formData.address.detail || 'æ±Ÿè‹çœæ‰¬å·å¸‚é‚—æ±ŸåŒºæ–‡æ˜Œè¥¿è·¯456å·' }}</text>
            <text class="address-contact">{{ formData.address.contact || 'ç‹ç»ç† 138****8888' }}</text>
          </view>
          <text class="arrow">â€º</text>
        </view>
        <view class="tip">
          <view class="tip-dot"></view>
          <text class="tip-text">ç‚¹å‡»å¯é€‰æ‹©æˆ–æ–°å¢æœåŠ¡åœ°å€</text>
        </view>
      </view>

      <!-- æœŸæœ›æœåŠ¡æ—¶é—´ -->
      <view class="section">
        <text class="section-title">æœŸæœ›æœåŠ¡æ—¶é—´</text>
        <view class="datetime-picker-wrapper">
          <picker mode="date" :value="serviceDate" @change="onDateChange">
            <view class="picker-card">
              <text class="calendar-icon">ğŸ“…</text>
              <text class="picker-text">{{ serviceDate || '2025-11-10' }}</text>
            </view>
          </picker>
          <picker mode="time" :value="serviceTime" @change="onTimeChange">
            <view class="picker-card">
              <text class="picker-text">{{ serviceTime || '14:00' }}</text>
              <text class="arrow">â–¼</text>
            </view>
          </picker>
        </view>
      </view>

      <!-- é¢„è®¡ç»“æŸæœåŠ¡æ—¶é—´ -->
      <view class="section">
        <text class="section-title">é¢„è®¡ç»“æŸæœåŠ¡æ—¶é—´</text>
        <view class="datetime-picker-wrapper">
          <picker mode="date" :value="endServiceDate" @change="onEndDateChange">
            <view class="picker-card">
              <text class="calendar-icon">ğŸ“…</text>
              <text class="picker-text">{{ endServiceDate || '2025-11-11' }}</text>
            </view>
          </picker>
          <picker mode="time" :value="endServiceTime" @change="onEndTimeChange">
            <view class="picker-card">
              <text class="picker-text">{{ endServiceTime || '18:00' }}</text>
              <text class="arrow">â–¼</text>
            </view>
          </picker>
        </view>
        <view class="tip">
          <view class="tip-dot"></view>
          <text class="tip-text">å·¥æœŸå¯åœ¨æœåŠ¡è¿‡ç¨‹ä¸­ä¸å·¥ç¨‹å¸ˆåå•†è°ƒæ•´</text>
        </view>
      </view>

      <!-- é¢„ç®—é‡‘é¢ -->
      <view class="section">
        <text class="section-title">é¢„ç®—é‡‘é¢</text>
        <view class="budget-input-wrapper">
          <text class="currency">Â¥</text>
          <input 
            class="budget-input" 
            type="digit"
            v-model="formData.budget" 
            placeholder="1500"
            placeholder-class="input-placeholder"
          />
        </view>
        <view class="tip">
          <view class="tip-dot"></view>
          <text class="tip-text">å‚è€ƒ:åŒç±»æœåŠ¡å¹³å‡ä»·æ ¼ Â¥1200-2000</text>
        </view>
      </view>

      <!-- éœ€æ±‚è¯´æ˜ -->
      <view class="section">
        <text class="section-title">éœ€æ±‚è¯´æ˜</text>
        <view class="description-wrapper">
          <textarea 
            class="description-textarea" 
            v-model="formData.description" 
            placeholder="æ™ºæ…§å›­åŒºç›‘æ§ç³»ç»Ÿå‡ºç°éƒ¨åˆ†æ‘„åƒå¤´ç¦»çº¿,éœ€è¦æ’æŸ¥ç½‘ç»œè¿æ¥é—®é¢˜å¹¶ä¿®å¤ã€‚æ¶‰åŠçº¦20ä¸ªç‚¹ä½,éœ€è¦æºå¸¦ç½‘ç»œæµ‹è¯•å·¥å…·ã€‚"
            placeholder-class="input-placeholder"
            maxlength="500"
          />
          <text class="edit-icon">âœï¸</text>
        </view>
      </view>

      <!-- åº•éƒ¨æ“ä½œæ  -->
      <view class="footer-section">
        <view class="agreement">
          <checkbox-group @change="onAgreementChange">
            <label class="agreement-label">
              <checkbox :checked="formData.agreed" color="#E53935" />
              <text class="agreement-text">é˜…è¯»å¹¶åŒæ„ã€Šç”µå­è¿å•å¥‘çº¦æ¡æ¬¾ã€‹</text>
            </label>
          </checkbox-group>
        </view>
        
        <view class="price-info">
          <text class="price-label">é¢„ä¼°æ€»ä»·</text>
          <text class="price-value">Â¥ -- æ˜ç»†</text>
        </view>
        
        <view class="action-buttons">
          <button class="save-draft-btn" @click="saveDraft">
            <text class="draft-icon">ğŸ’¾</text>
            <text>ä¿å­˜è‰ç¨¿</text>
          </button>
          <button class="next-btn" :class="{ disabled: !canNext }" @click="handleNext">
            ä¸‹ä¸€æ­¥
          </button>
        </view>
      </view>

      <!-- å ä½ -->
      <view style="height: 100rpx;"></view>
    </scroll-view>
  </view>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue'

const formData = ref({
  serviceType: 2, // é»˜è®¤é€‰ä¸­æ‰¾å”®å‰
  problemTypes: [] as number[],
  initiateOrder: true,
  distributionMode: 'auto' as 'auto' | 'assign',
  serviceMethod: 'onsite' as 'online' | 'onsite',
  address: {
    name: 'æ‰¬å·å¸‚æ™ºæ…§å›­åŒº',
    detail: 'æ±Ÿè‹çœæ‰¬å·å¸‚é‚—æ±ŸåŒºæ–‡æ˜Œè¥¿è·¯456å·',
    contact: 'ç‹ç»ç† 138****8888'
  },
  serviceDateTime: '2025-11-10 14:00',
  endServiceDateTime: '2025-11-11 18:00',
  budget: '1500',
  description: 'æ™ºæ…§å›­åŒºç›‘æ§ç³»ç»Ÿå‡ºç°éƒ¨åˆ†æ‘„åƒå¤´ç¦»çº¿,éœ€è¦æ’æŸ¥ç½‘ç»œè¿æ¥é—®é¢˜å¹¶ä¿®å¤ã€‚æ¶‰åŠçº¦20ä¸ªç‚¹ä½,éœ€è¦æºå¸¦ç½‘ç»œæµ‹è¯•å·¥å…·ã€‚',
  agreed: false
})

const serviceTypes = ref([
  { 
    value: 1, 
    name: 'æ‰¾å”®å', 
    desc: 'ç»´æŠ¤ä¿å…»',
    detail: 'è®¾å¤‡æ•…éšœç»´ä¿®ã€æ—¥å¸¸ä¿å…»ã€ç³»ç»Ÿè°ƒè¯•ç­‰å”®åæœåŠ¡',
    icon: '/static/icon-png-home/æ‰³æ‰‹.png'
  },
  { 
    value: 2, 
    name: 'æ‰¾å”®å‰', 
    desc: 'å®‰è£…è°ƒè¯•',
    detail: 'ç°åœºè¸å‹˜ã€æ–¹æ¡ˆè®¾è®¡ã€æŠ€æœ¯äº¤æµç­‰å”®å‰æ”¯æŒ',
    icon: '/static/icons/è´§è½¦.png'
  },
  { 
    value: 3, 
    name: 'å”®åå·¥ç¨‹', 
    desc: 'å·¥ç¨‹é¡¹ç›®',
    detail: 'å”®åå·¥ç¨‹é¡¹ç›®å®æ–½ã€ç³»ç»Ÿé›†æˆã€è®¾å¤‡å®‰è£…ç­‰',
    icon: '/static/icons/å›¢é˜Ÿ.png'
  },
  { 
    value: 4, 
    name: 'å›¢é˜ŸæœåŠ¡', 
    desc: 'æœåŠ¡æ”¯æŒ',
    detail: 'æŠ€æœ¯æ”¯æŒã€è¿œç¨‹ååŠ©ã€å®šæœŸå·¡æ£€ç­‰å›¢é˜ŸæœåŠ¡',
    icon: '/static/icons/customer-service.png'
  }
])

// ä¸åŒæœåŠ¡ç±»å‹å¯¹åº”çš„é—®é¢˜ç±»å‹
const problemTypeMap: any = {
  1: [ // æ‰¾å”®å
    { name: 'è½¯ä»¶å¹³å°é—®é¢˜', selected: false },
    { name: 'æ•°æ®å¯¹æ¥é—®é¢˜', selected: false },
    { name: 'å‰ç«¯é—®é¢˜ï¼ˆé¢‘é—ªç¯/çˆ†é—ªç¯/ç›¸æœº/é›·è§†ä¸€ä½“æœº/ä¿¡å·æœº/å¹¿æ’­/éŸ³å“/å……ç”µæ¡©ç­‰ï¼‰', selected: false },
    { name: 'ç½‘ç»œé—®é¢˜', selected: false },
    { name: 'ç»¼åˆç±»é—®é¢˜', selected: false },
    { name: 'åŸ¹è®­', selected: false },
    { name: 'å…¶ä»–', selected: false }
  ],
  2: [ // æ‰¾å”®å‰
    { name: 'å‰æœŸå±€ç‚¹è¸å‹˜', selected: false },
    { name: 'æ”¿ä¼é¡¹ç›®å‰æœŸå‡ºæ–¹æ¡ˆ', selected: false },
    { name: 'å¼±ç”µåŠæ•°å­—åŒ–å·¥ç¨‹é‡æ ¸ç®—', selected: false },
    { name: 'æŠ€æœ¯äº¤æµä¸æ±‡æŠ¥', selected: false },
    { name: 'å…¶ä»–', selected: false }
  ],
  3: [ // å”®åå·¥ç¨‹
    { name: 'å®‰è£…è°ƒè¯•', selected: false }
  ],
  4: [ // å›¢é˜ŸæœåŠ¡
    { name: 'å”®å‰+å”®å', selected: false }
  ]
}

const problemTypes = ref([
  { name: 'å‰æœŸå±€ç‚¹è¸å‹˜', selected: false },
  { name: 'æ”¿ä¼é¡¹ç›®å‰æœŸå‡ºæ–¹æ¡ˆ', selected: false },
  { name: 'å¼±ç”µåŠæ•°å­—åŒ–å·¥ç¨‹é‡æ ¸ç®—', selected: false },
  { name: 'æŠ€æœ¯äº¤æµä¸æ±‡æŠ¥', selected: false },
  { name: 'å…¶ä»–', selected: false }
])


// æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨æ•°æ®
const serviceDate = ref('2025-11-10')
const serviceTime = ref('14:00')
const endServiceDate = ref('2025-11-11')
const endServiceTime = ref('18:00')

// åˆå§‹åŒ–æ—¥æœŸæ—¶é—´
onMounted(() => {
  // è·å–é¡µé¢å‚æ•°
  const pages = getCurrentPages()
  const currentPage = pages[pages.length - 1] as any
  const options = currentPage.options || {}
  
  // å¦‚æœæœ‰ä¼ å…¥æœåŠ¡ç±»å‹å‚æ•°ï¼Œè®¾ç½®ä¸ºé»˜è®¤å€¼
  if (options.service_type) {
    const serviceType = parseInt(options.service_type)
    if (serviceType >= 1 && serviceType <= 4) {
      formData.value.serviceType = serviceType
    }
  }
  
  // åˆå§‹åŒ–æ—¥æœŸæ—¶é—´
  formData.value.serviceDateTime = `${serviceDate.value} ${serviceTime.value}`
  formData.value.endServiceDateTime = `${endServiceDate.value} ${endServiceTime.value}`
  
  // é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªé—®é¢˜ç±»å‹
  updateProblemTypes()
})

// æ˜¯å¦å¯ä»¥ä¸‹ä¸€æ­¥
const canNext = computed(() => {
  return formData.value.serviceType &&
         formData.value.problemTypes.length > 0 &&
         formData.value.initiateOrder !== null &&
         formData.value.distributionMode &&
         formData.value.serviceMethod &&
         formData.value.serviceDateTime &&
         formData.value.endServiceDateTime &&
         formData.value.budget &&
         formData.value.description &&
         formData.value.agreed
})


// è¿”å›
function goBack() {
  uni.navigateBack()
}

// æ›´æ–°é—®é¢˜ç±»å‹åˆ—è¡¨
function updateProblemTypes() {
  const types = problemTypeMap[formData.value.serviceType] || problemTypeMap[2]
  // æ›´æ–°é—®é¢˜ç±»å‹åˆ—è¡¨ï¼ˆæ·±æ‹·è´ï¼‰
  problemTypes.value = types.map((item: any) => ({ ...item }))
  // é‡ç½®é—®é¢˜ç±»å‹é€‰æ‹©
  formData.value.problemTypes = []
  // é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªé—®é¢˜ç±»å‹
  if (problemTypes.value.length > 0) {
    problemTypes.value[0].selected = true
    formData.value.problemTypes = [0]
  }
}

// é€‰æ‹©æœåŠ¡ç±»å‹
function selectServiceType(type: number) {
  formData.value.serviceType = type
  // åˆ‡æ¢æœåŠ¡ç±»å‹æ—¶ï¼Œé‡ç½®å¹¶æ›´æ–°é—®é¢˜ç±»å‹
  updateProblemTypes()
}

// åˆ‡æ¢é—®é¢˜ç±»å‹
function toggleProblemType(index: number) {
  problemTypes.value[index].selected = !problemTypes.value[index].selected
  formData.value.problemTypes = problemTypes.value
    .map((item, idx) => item.selected ? idx : -1)
    .filter(idx => idx !== -1)
}

// é€‰æ‹©æ˜¯å¦å‘èµ·å·¥å•
function selectInitiateOrder(value: boolean) {
  formData.value.initiateOrder = value
}

// é€‰æ‹©å·¥å•åˆ†å‘æ¨¡å¼
function selectDistributionMode(mode: 'auto' | 'assign') {
  formData.value.distributionMode = mode
}

// é€‰æ‹©æœåŠ¡æ–¹å¼
function selectServiceMethod(method: 'online' | 'onsite') {
  formData.value.serviceMethod = method
}

// é€‰æ‹©åœ°å€
function chooseAddress() {
  uni.showModal({
    title: 'æç¤º',
    content: 'åœ°å€é€‰æ‹©åŠŸèƒ½å¼€å‘ä¸­ï¼ŒV2ç‰ˆæœ¬å°†æ”¯æŒåœ°å›¾é€‰ç‚¹',
    showCancel: false
  })
}

// æ—¥æœŸæ”¹å˜
function onDateChange(e: any) {
  serviceDate.value = e.detail.value
  formData.value.serviceDateTime = `${e.detail.value} ${serviceTime.value}`
}

// æ—¶é—´æ”¹å˜
function onTimeChange(e: any) {
  serviceTime.value = e.detail.value
  formData.value.serviceDateTime = `${serviceDate.value} ${e.detail.value}`
}

// ç»“æŸæœåŠ¡æ—¥æœŸæ”¹å˜
function onEndDateChange(e: any) {
  endServiceDate.value = e.detail.value
  formData.value.endServiceDateTime = `${e.detail.value} ${endServiceTime.value}`
}

// ç»“æŸæœåŠ¡æ—¶é—´æ”¹å˜
function onEndTimeChange(e: any) {
  endServiceTime.value = e.detail.value
  formData.value.endServiceDateTime = `${endServiceDate.value} ${e.detail.value}`
}

// åè®®æ”¹å˜
function onAgreementChange(e: any) {
  formData.value.agreed = e.detail.value.length > 0
}

// ä¿å­˜è‰ç¨¿
function saveDraft() {
  uni.showLoading({ title: 'ä¿å­˜ä¸­...' })
  
  // TODO: ä¿å­˜è‰ç¨¿åˆ°æœ¬åœ°å­˜å‚¨æˆ–åç«¯
  setTimeout(() => {
    uni.hideLoading()
    uni.showToast({
      title: 'è‰ç¨¿å·²ä¿å­˜',
      icon: 'success'
    })
  }, 500)
}

// ä¸‹ä¸€æ­¥
function handleNext() {
  if (!canNext.value) {
    uni.showToast({
      title: 'è¯·å®Œå–„å¿…å¡«ä¿¡æ¯',
      icon: 'none'
    })
    return
  }

  // TODO: è·³è½¬åˆ°ä¸‹ä¸€æ­¥é¡µé¢æˆ–æäº¤
  uni.showToast({
    title: 'åŠŸèƒ½å¼€å‘ä¸­',
    icon: 'none'
  })
  
  // ç¤ºä¾‹ï¼šè·³è½¬åˆ°ç¡®è®¤é¡µé¢
  // uni.navigateTo({
  //   url: '/pages/service/confirm'
  // })
}
</script>

<style scoped lang="scss">
.page {
  min-height: 100vh;
  background-color: #F5F5F5;
  display: flex;
  flex-direction: column;
}

.top-nav {
  background: #FFFFFF;
  padding: calc(env(safe-area-inset-top) + 20rpx) 32rpx 20rpx;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1rpx solid #F0F0F0;
}

.nav-back {
  font-size: 44rpx;
  color: #333;
  width: 80rpx;
}

.nav-title {
  font-size: 36rpx;
  font-weight: 600;
  color: #333;
  flex: 1;
  text-align: center;
}

.nav-placeholder {
  width: 80rpx;
}

.content-scroll {
  flex: 1;
}

.section {
  background: #FFFFFF;
  margin: 24rpx 32rpx 0;
  padding: 32rpx;
  padding-top: 48rpx;
  padding-right: 48rpx;
  border-radius: 16rpx;
  overflow: visible;
  position: relative;
}

.section-title {
  font-size: 32rpx;
  font-weight: 600;
  color: #333;
  margin-bottom: 24rpx;
  display: block;
}

.optional {
  font-weight: 400;
  color: #999;
  font-size: 28rpx;
}

// æœåŠ¡ç±»å‹é€‰æ‹©
.service-type-group {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16rpx;
}

.service-type-card {
  border: 2rpx solid #E0E0E0;
  border-radius: 16rpx;
  padding: 24rpx 20rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  overflow: visible;
  
  &.active {
    border-color: #E53935;
    background-color: #FFF5F5;
  }
}

.card-header {
  width: 100%;
  display: flex;
  justify-content: flex-start;
  align-items: flex-start;
  margin-bottom: 16rpx;
}

.service-icon {
  width: 56rpx;
  height: 56rpx;
}

.check-mark {
  position: absolute;
  top: -8rpx;
  right: -8rpx;
  width: 40rpx;
  height: 40rpx;
  background-color: #E53935;
  border-radius: 50%;
  color: #FFFFFF;
  font-size: 24rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  z-index: 10;
  border: 2rpx solid #FFFFFF;
  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.15);
}

.service-name {
  font-size: 28rpx;
  font-weight: 600;
  color: #333;
  margin-bottom: 6rpx;
}

.service-desc {
  font-size: 24rpx;
  color: #666;
  margin-bottom: 8rpx;
}

.service-detail {
  font-size: 22rpx;
  color: #999;
  text-align: center;
  line-height: 1.4;
}

// é—®é¢˜ç±»å‹
.problem-type-group {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  gap: 16rpx;
}

.problem-type-item {
  padding: 20rpx 32rpx;
  border: 2rpx solid #E0E0E0;
  border-radius: 48rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: visible;
  
  &.active {
    border-color: #E53935;
    background-color: #FFF5F5;
  }
}

.problem-name {
  font-size: 28rpx;
  color: #333;
}

// é€‰é¡¹ç»„
.option-group {
  display: flex;
  flex-direction: row;
  gap: 24rpx;
  margin-bottom: 16rpx;
}

.option-item {
  flex: 1;
  padding: 24rpx;
  border: 2rpx solid #E0E0E0;
  border-radius: 12rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: visible;
  
  &.active {
    border-color: #E53935;
    background-color: #FFF5F5;
  }
}

.option-text {
  font-size: 28rpx;
  color: #333;
}

// æç¤ºä¿¡æ¯
.tip {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  gap: 8rpx;
  margin-top: 16rpx;
}

.tip-dot {
  width: 8rpx;
  height: 8rpx;
  background-color: #FF9800;
  border-radius: 50%;
  margin-top: 10rpx;
  flex-shrink: 0;
}

.tip-text {
  font-size: 24rpx;
  color: #999;
  line-height: 1.5;
  flex: 1;
}

// åœ°å€å¡ç‰‡
.address-card {
  background-color: #F5F5F5;
  border-radius: 12rpx;
  padding: 24rpx;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
}

.address-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8rpx;
}

.address-name {
  font-size: 30rpx;
  font-weight: 600;
  color: #333;
}

.address-detail {
  font-size: 26rpx;
  color: #666;
}

.address-contact {
  font-size: 26rpx;
  color: #666;
}

.arrow {
  font-size: 44rpx;
  color: #999;
  margin-left: 16rpx;
}

// æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨
.datetime-picker-wrapper {
  display: flex;
  flex-direction: row;
  gap: 16rpx;
}

.picker-card {
  flex: 1;
  background-color: #F5F5F5;
  border-radius: 12rpx;
  padding: 24rpx;
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 16rpx;
}

.calendar-icon {
  font-size: 32rpx;
}

.picker-text {
  flex: 1;
  font-size: 28rpx;
  color: #333;
}


// é¢„ç®—è¾“å…¥
.budget-input-wrapper {
  background-color: #F5F5F5;
  border-radius: 12rpx;
  padding: 24rpx;
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 12rpx;
}

.currency {
  font-size: 32rpx;
  font-weight: 600;
  color: #333;
}

.budget-input {
  flex: 1;
  font-size: 32rpx;
  color: #333;
}

.input-placeholder {
  color: #BDBDBD;
}

// éœ€æ±‚è¯´æ˜
.description-wrapper {
  background-color: #F5F5F5;
  border-radius: 12rpx;
  padding: 24rpx;
  position: relative;
}

.description-textarea {
  width: 100%;
  min-height: 200rpx;
  font-size: 28rpx;
  color: #333;
  line-height: 1.6;
  
}

.edit-icon {
  position: absolute;
  bottom: 16rpx;
  right: 16rpx;
  font-size: 32rpx;
}

// åº•éƒ¨æ“ä½œæ 
.footer-section {
  background: #FFFFFF;
  margin-top: 32rpx;
  padding: 32rpx;
  border-top: 1rpx solid #F0F0F0;
}

.agreement {
  margin-bottom: 24rpx;
}

.agreement-label {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 12rpx;
}

.agreement-text {
  font-size: 26rpx;
  color: #666;
}

.price-info {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24rpx;
  padding: 20rpx 0;
  border-top: 1rpx solid #F0F0F0;
  border-bottom: 1rpx solid #F0F0F0;
}

.price-label {
  font-size: 28rpx;
  color: #333;
}

.price-value {
  font-size: 28rpx;
  color: #E53935;
  font-weight: 600;
}

.action-buttons {
  display: flex;
  flex-direction: row;
  gap: 16rpx;
}

.save-draft-btn {
  flex: 1;
  background-color: #FFFFFF;
  border: 2rpx solid #E0E0E0;
  border-radius: 48rpx;
  padding: 24rpx;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  gap: 8rpx;
  font-size: 28rpx;
  color: #666;
}

.draft-icon {
  font-size: 28rpx;
}

.next-btn {
  flex: 2;
  background: linear-gradient(135deg, #F44336 0%, #E53935 100%);
  color: #FFFFFF;
  border: none;
  border-radius: 48rpx;
  padding: 24rpx;
  font-size: 32rpx;
  font-weight: 600;
  box-shadow: 0 8rpx 24rpx rgba(244, 67, 54, 0.3);
  
  &.disabled {
    background: #BDBDBD;
    box-shadow: none;
    opacity: 0.6;
  }
}
</style>

