# æ¨¡æ‹Ÿç™»å½•åŠŸèƒ½ä½¿ç”¨è¯´æ˜

## æ¦‚è¿°

ä¸ºäº†æ–¹ä¾¿å¼€å‘å’Œæµ‹è¯•ï¼Œæˆ‘ä»¬æä¾›äº†æ¨¡æ‹Ÿç™»å½•åŠŸèƒ½ï¼Œå¯ä»¥å¿«é€Ÿåˆ‡æ¢ä¸åŒè§’è‰²å’Œç”¨æˆ·çŠ¶æ€ï¼Œæ— éœ€çœŸå®çš„å¾®ä¿¡ç™»å½•æµç¨‹ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

âœ¨ **ä¸€é”®ç™»å½•** - æ— éœ€å¾®ä¿¡æˆæƒï¼Œç‚¹å‡»å³å¯ç™»å½•  
ğŸ”„ **å¿«é€Ÿåˆ‡æ¢** - æ”¯æŒåœ¨ä¸åŒæµ‹è¯•è´¦å·é—´å¿«é€Ÿåˆ‡æ¢  
ğŸ‘¥ **å¤šè§’è‰²æ”¯æŒ** - åŒ…å«å®¢æˆ·å’Œå·¥ç¨‹å¸ˆä¸¤ç§è§’è‰²  
ğŸ“Š **å®Œæ•´æ•°æ®** - æ¯ä¸ªæµ‹è¯•è´¦å·éƒ½æœ‰å®Œæ•´çš„ç”¨æˆ·ä¿¡æ¯  
ğŸ¯ **é›¶é…ç½®** - å¼€ç®±å³ç”¨ï¼Œæ— éœ€é¢å¤–é…ç½®

## ä½¿ç”¨æ–¹å¼

### 1. ç™»å½•é¡µé¢æ¨¡æ‹Ÿç™»å½•

åœ¨ç™»å½•é¡µé¢ï¼ˆ`pages/index/index.uvue`ï¼‰åº•éƒ¨ä¼šæ˜¾ç¤º"å¼€å‘ç¯å¢ƒ"åŒºåŸŸï¼Œæä¾›ä¸¤ä¸ªæŒ‰é’®ï¼š

- **æ¨¡æ‹Ÿå®¢æˆ·ç™»å½•** - ä»¥å®¢æˆ·èº«ä»½ç™»å½•
- **æ¨¡æ‹Ÿå·¥ç¨‹å¸ˆç™»å½•** - ä»¥å·¥ç¨‹å¸ˆèº«ä»½ç™»å½•

ç‚¹å‡»åä¼šè‡ªåŠ¨è·³è½¬åˆ°å¯¹åº”çš„é¦–é¡µã€‚

### 2. ä½¿ç”¨ç”¨æˆ·åˆ‡æ¢ç»„ä»¶

åœ¨ä»»æ„é¡µé¢å¼•å…¥ `MockUserSwitch` ç»„ä»¶ï¼Œå¯ä»¥å®ç°å¿«é€Ÿåˆ‡æ¢æµ‹è¯•è´¦å·ï¼š

```vue
<template>
  <view>
    <!-- ä½ çš„é¡µé¢å†…å®¹ -->
    
    <!-- ç”¨æˆ·åˆ‡æ¢ç»„ä»¶ -->
    <MockUserSwitch />
  </view>
</template>

<script setup>
import MockUserSwitch from '@/components/MockUserSwitch/MockUserSwitch.uvue'
</script>
```

ç»„ä»¶ä¼šåœ¨é¡µé¢å³ä¸‹è§’æ˜¾ç¤ºä¸€ä¸ªæ‚¬æµ®æŒ‰é’® ğŸ‘¤ï¼Œç‚¹å‡»åå¼¹å‡ºç”¨æˆ·åˆ—è¡¨é¢æ¿ã€‚

### 3. ç¼–ç¨‹æ–¹å¼è°ƒç”¨

åœ¨ä»£ç ä¸­ç›´æ¥è°ƒç”¨æ¨¡æ‹Ÿç™»å½•å‡½æ•°ï¼š

```javascript
import { mockLogin, switchMockUser } from '@/utils/mock-login'

// æ¨¡æ‹Ÿå®¢æˆ·ç™»å½•
await mockLogin('customer')

// æ¨¡æ‹Ÿå·¥ç¨‹å¸ˆç™»å½•
await mockLogin('engineer')

// å¿«é€Ÿåˆ‡æ¢åˆ°å…¶ä»–è´¦å·
await switchMockUser('customer2')

// è‡ªå®šä¹‰é…ç½®
await mockLogin('engineer', {
  showLoading: true,    // æ˜¯å¦æ˜¾ç¤ºåŠ è½½æç¤º
  showToast: true,      // æ˜¯å¦æ˜¾ç¤ºæˆåŠŸæç¤º
  autoNavigate: true,   // æ˜¯å¦è‡ªåŠ¨è·³è½¬
  delay: 800           // æ¨¡æ‹Ÿå»¶è¿Ÿæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
})
```

## æµ‹è¯•è´¦å·åˆ—è¡¨

### å®¢æˆ·è´¦å·

#### 1. æµ‹è¯•å®¢æˆ· (customer)
- **ç”¨æˆ·ID**: mock_customer_001
- **æ˜µç§°**: æµ‹è¯•å®¢æˆ·
- **æ‰‹æœº**: 13800138000
- **å®åè®¤è¯**: æœªè®¤è¯
- **ä¼šå‘˜ç­‰çº§**: 0
- **çœŸå®å§“å**: å¼ ä¸‰

#### 2. ç‹å°æ˜ (customer2)
- **ç”¨æˆ·ID**: mock_customer_002
- **æ˜µç§°**: ç‹å°æ˜
- **æ‰‹æœº**: 13700137000
- **å®åè®¤è¯**: å·²è®¤è¯ âœ“
- **ä¼šå‘˜ç­‰çº§**: 1
- **çœŸå®å§“å**: ç‹å°æ˜

### å·¥ç¨‹å¸ˆè´¦å·

#### 1. æµ‹è¯•å·¥ç¨‹å¸ˆ (engineer)
- **ç”¨æˆ·ID**: mock_engineer_001
- **æ˜µç§°**: æµ‹è¯•å·¥ç¨‹å¸ˆ
- **æ‰‹æœº**: 13900139000
- **å®åè®¤è¯**: å·²è®¤è¯ âœ“
- **ä¼šå‘˜ç­‰çº§**: 2
- **çœŸå®å§“å**: æå››
- **æŠ€èƒ½**: æ™ºæ…§å›­åŒºã€å……ç”µæ¡©ç»´ä¿®ã€AGVæœºå™¨äºº
- **è¯„åˆ†**: 4.8â­
- **å®Œæˆè®¢å•**: 156

#### 2. èµ„æ·±ç»´ä¿®å¸ˆ (engineer2)
- **ç”¨æˆ·ID**: mock_engineer_002
- **æ˜µç§°**: èµ„æ·±ç»´ä¿®å¸ˆ
- **æ‰‹æœº**: 13600136000
- **å®åè®¤è¯**: å·²è®¤è¯ âœ“
- **ä¼šå‘˜ç­‰çº§**: 3
- **çœŸå®å§“å**: èµµå¤§é”¤
- **æŠ€èƒ½**: æ™ºæ…§äº¤ç®¡ã€æ™ºæ…§è­¦åŠ¡ã€åº”æ€¥æ¶ˆé˜²ã€å‡ºå…¥å£é€šé“
- **è¯„åˆ†**: 4.9â­
- **å®Œæˆè®¢å•**: 328

## å·¥å…·å‡½æ•° API

### mockLogin(userType, options)

æ¨¡æ‹Ÿç”¨æˆ·ç™»å½•

**å‚æ•°ï¼š**
- `userType` (string) - ç”¨æˆ·ç±»å‹ï¼Œå¯é€‰å€¼ï¼š'customer', 'engineer', 'customer2', 'engineer2'
- `options` (object) - é…ç½®é€‰é¡¹
  - `showLoading` (boolean) - æ˜¯å¦æ˜¾ç¤ºåŠ è½½æç¤ºï¼Œé»˜è®¤ true
  - `showToast` (boolean) - æ˜¯å¦æ˜¾ç¤ºæˆåŠŸæç¤ºï¼Œé»˜è®¤ true
  - `autoNavigate` (boolean) - æ˜¯å¦è‡ªåŠ¨è·³è½¬é¦–é¡µï¼Œé»˜è®¤ true
  - `delay` (number) - æ¨¡æ‹Ÿå»¶è¿Ÿæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤ 800

**è¿”å›ï¼š** Promise<{ token, userInfo }>

### switchMockUser(userType)

å¿«é€Ÿåˆ‡æ¢ç”¨æˆ·ï¼ˆå‡å°‘å»¶è¿Ÿå’Œæç¤ºï¼‰

**å‚æ•°ï¼š**
- `userType` (string) - ç”¨æˆ·ç±»å‹

**è¿”å›ï¼š** Promise<{ token, userInfo }>

### getMockUserList()

è·å–æ‰€æœ‰æ¨¡æ‹Ÿç”¨æˆ·åˆ—è¡¨

**è¿”å›ï¼š** Array<User>

### isMockLogin()

åˆ¤æ–­å½“å‰æ˜¯å¦ä¸ºæ¨¡æ‹Ÿç™»å½•

**è¿”å›ï¼š** boolean

### generateMockToken(userType)

ç”Ÿæˆæ¨¡æ‹Ÿ token

**å‚æ•°ï¼š**
- `userType` (string) - ç”¨æˆ·ç±»å‹

**è¿”å›ï¼š** string

## æ•°æ®ç»“æ„

### ç”¨æˆ·ä¿¡æ¯ç»“æ„

```javascript
{
  id: string,              // ç”¨æˆ·ID
  nickname: string,        // æ˜µç§°
  avatar: string,          // å¤´åƒURL
  phone: string,           // æ‰‹æœºå·
  user_type: string,       // ç”¨æˆ·ç±»å‹ï¼š'customer' | 'engineer'
  is_verified: boolean,    // æ˜¯å¦å®åè®¤è¯
  vip_level: number,       // ä¼šå‘˜ç­‰çº§
  realName: string,        // çœŸå®å§“å
  idCard: string,          // èº«ä»½è¯å·
  createTime: number,      // åˆ›å»ºæ—¶é—´æˆ³
  loginTime: number,       // ç™»å½•æ—¶é—´æˆ³
  
  // å·¥ç¨‹å¸ˆç‰¹æœ‰å­—æ®µ
  skills: string[],        // æŠ€èƒ½åˆ—è¡¨
  rating: number,          // è¯„åˆ†
  completedOrders: number  // å®Œæˆè®¢å•æ•°
}
```

### Token æ ¼å¼

æ¨¡æ‹Ÿ token çš„æ ¼å¼ä¸ºï¼š`mock_token_{userType}_{timestamp}_{random}`

ä¾‹å¦‚ï¼š`mock_token_customer_1700000000000_abc123xyz`

## æœ€ä½³å®è·µ

### 1. æµ‹è¯•ä¸åŒç”¨æˆ·åœºæ™¯

```javascript
// æµ‹è¯•æœªè®¤è¯å®¢æˆ·
await mockLogin('customer')

// æµ‹è¯•å·²è®¤è¯å®¢æˆ·
await mockLogin('customer2')

// æµ‹è¯•æ™®é€šå·¥ç¨‹å¸ˆ
await mockLogin('engineer')

// æµ‹è¯•èµ„æ·±å·¥ç¨‹å¸ˆ
await mockLogin('engineer2')
```

### 2. æµ‹è¯•æƒé™æ§åˆ¶

```javascript
import { isCustomer, isEngineer } from '@/utils/auth'

// ç™»å½•ä¸ºå®¢æˆ·
await mockLogin('customer')
console.log(isCustomer()) // true
console.log(isEngineer()) // false

// åˆ‡æ¢ä¸ºå·¥ç¨‹å¸ˆ
await switchMockUser('engineer')
console.log(isCustomer()) // false
console.log(isEngineer()) // true
```

### 3. æµ‹è¯•è®¢å•æµç¨‹

```javascript
// å®¢æˆ·åˆ›å»ºè®¢å•
await mockLogin('customer')
// ... åˆ›å»ºè®¢å•æ“ä½œ

// åˆ‡æ¢ä¸ºå·¥ç¨‹å¸ˆæ¥å•
await switchMockUser('engineer')
// ... æ¥å•æ“ä½œ
```

## ç”Ÿäº§ç¯å¢ƒå¤„ç†

åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®å…³é—­æ¨¡æ‹Ÿç™»å½•åŠŸèƒ½ï¼š

```javascript
// pages/index/index.uvue
const showMockLogin = ref(false) // æ”¹ä¸º false

// components/MockUserSwitch/MockUserSwitch.uvue
const isDev = ref(false) // æ”¹ä¸º false
```

æˆ–è€…æ ¹æ®ç¯å¢ƒå˜é‡åˆ¤æ–­ï¼š

```javascript
const showMockLogin = ref(process.env.NODE_ENV === 'development')
```

## æ³¨æ„äº‹é¡¹

âš ï¸ **ä»…ç”¨äºå¼€å‘æµ‹è¯•** - æ¨¡æ‹Ÿç™»å½•åŠŸèƒ½ä»…ç”¨äºå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒï¼Œä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨

âš ï¸ **Token æ ¼å¼** - æ¨¡æ‹Ÿ token ä»¥ `mock_token_` å¼€å¤´ï¼Œåç«¯å¯ä»¥é€šè¿‡è¿™ä¸ªç‰¹å¾è¯†åˆ«å¹¶è·³è¿‡éªŒè¯

âš ï¸ **æ•°æ®éš”ç¦»** - æ¨¡æ‹Ÿç™»å½•äº§ç”Ÿçš„æ•°æ®åº”è¯¥ä¸çœŸå®æ•°æ®éš”ç¦»

âš ï¸ **åŠæ—¶æ¸…ç†** - å‘å¸ƒå‰è®°å¾—å…³é—­æˆ–ç§»é™¤æ¨¡æ‹Ÿç™»å½•ç›¸å…³ä»£ç 

## æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šç‚¹å‡»æ¨¡æ‹Ÿç™»å½•æ²¡ååº”

**è§£å†³ï¼š**
1. æ£€æŸ¥ `showMockLogin` æ˜¯å¦ä¸º true
2. æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰æŠ¥é”™
3. ç¡®è®¤ mock-login.js æ–‡ä»¶å·²æ­£ç¡®å¯¼å…¥

### é—®é¢˜ï¼šåˆ‡æ¢ç”¨æˆ·åæ•°æ®æ²¡æ›´æ–°

**è§£å†³ï¼š**
1. ç¡®è®¤é¡µé¢æœ‰æ­£ç¡®è¯»å–ç”¨æˆ·ä¿¡æ¯
2. å°è¯•åˆ·æ–°é¡µé¢
3. æ¸…é™¤ç¼“å­˜åé‡æ–°ç™»å½•

### é—®é¢˜ï¼šå·¥ç¨‹å¸ˆè´¦å·è·³è½¬åˆ°å®¢æˆ·é¦–é¡µ

**è§£å†³ï¼š**
1. æ£€æŸ¥ user_type å­—æ®µæ˜¯å¦æ­£ç¡®
2. ç¡®è®¤è·¯ç”±é…ç½®æ­£ç¡®
3. æŸ¥çœ‹ navigateToHome() å‡½æ•°é€»è¾‘

## æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„æµ‹è¯•è´¦å·

åœ¨ `utils/mock-login.js` ä¸­æ·»åŠ ï¼š

```javascript
export const MOCK_USERS = {
  // ... ç°æœ‰è´¦å·
  
  // æ–°å¢è´¦å·
  vip_customer: {
    id: 'mock_customer_003',
    nickname: 'VIPå®¢æˆ·',
    phone: '13500135000',
    user_type: 'customer',
    is_verified: true,
    vip_level: 3,
    // ... å…¶ä»–ä¿¡æ¯
  }
}
```

### è‡ªå®šä¹‰ç™»å½•é€»è¾‘

```javascript
import { setToken, setUserInfo, navigateToHome } from '@/utils/auth'

export function customMockLogin(customData) {
  const token = generateMockToken('custom')
  setToken(token)
  setUserInfo(customData)
  navigateToHome()
}
```

## æ€»ç»“

æ¨¡æ‹Ÿç™»å½•åŠŸèƒ½æå¤§åœ°æå‡äº†å¼€å‘æ•ˆç‡ï¼Œè®©ä½ å¯ä»¥ï¼š

- ğŸš€ å¿«é€Ÿæµ‹è¯•ä¸åŒç”¨æˆ·åœºæ™¯
- ğŸ”„ è½»æ¾åˆ‡æ¢ç”¨æˆ·è§’è‰²
- ğŸ¯ ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å¼€å‘
- âš¡ èŠ‚çœå¤§é‡æµ‹è¯•æ—¶é—´

è®°ä½åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å…³é—­æ­¤åŠŸèƒ½ï¼

